# 기준선 보강 스킬 — 기준선 보강 (Equalize Baseline)

밀도가 낮은 글의 기준선을 끌어올려, 후속 파이프라인이 효과적으로 작동할 수 있도록 합니다.
**0→1**(없는 것을 만듦)에 집중합니다. 문장 다듬기나 서사적 톤, 성찰적 문단 등은 후속 단계가 처리합니다.

## 파이프라인 위치

```
▶ /equalize-baseline → /edit-writing → /clarify-writing → /refine-style → /smooth-flow → /verify-facts → /deep-review → /align-reference
   기준선 보강           골격             이해               목소리           흐름            사실             독자 시뮬레이션     레퍼런스 정렬
```

이 스킬은 파이프라인의 **영번째(최선두) 단계**입니다:
- 밀도가 낮은 글도 1단계 이후 스킬들이 제대로 동작할 수 있는 최소 기준선을 확보합니다
- 후속 단계와 겹치는 영역은 "존재 여부"까지만 책임지고, "수준"은 해당 단계에 맡깁니다

최선두인 이유:
- 골격(/edit-writing)이 작동하려면 설명 블록이 최소한 존재해야 합니다
- 이해(/clarify-writing)가 빠진 설명을 찾으려면 도입부에 맥락이 있어야 합니다
- 마무리 형식이 정규화되어야 후속 단계가 구조를 덮어쓰지 않습니다

## 인자
- `$ARGUMENTS`: 수정할 파일 경로 (선택사항). 없으면 사용자에게 파일 경로를 요청합니다.

> **교차 규칙**: `/soobak-writing-review`의 **사용자 문체 규칙**(질문형 금지, 기술 용어 보존, 메타 문장 금지, 교과서적 표현 금지, 산문 우선, 초보자 기준 설명, 추상적 서술 구체화)이 이 스킬의 모든 수정에 적용됩니다. 충돌 시 문체 규칙이 우선합니다.

---

## 영역 1: 설명 밀도 보강

### 19일 레퍼런스 패턴

모든 핵심 개념은 **"원리 → 예시 → 다이어그램"** 3단 구조로 설명됩니다.

```
# 레퍼런스 (NetworkCommunication-1)
원리: "음성의 주파수는 300Hz~3400Hz이고, 효율적인 안테나 길이는 파장의 1/4입니다."
예시: "3000Hz의 파장은 약 10만 미터이므로, 안테나 길이가 25km가 됩니다."
다이어그램: 변조 과정을 시각적으로 표현
```

### 탐지 기준

다음 중 하나라도 해당하면 밀도 부족으로 판단합니다:

1. **섹션별 줄 수 부족**: `##` 섹션의 콘텐츠가 5줄 이하
2. **불릿만 나열**: 3개 이상의 불릿이 설명 없이 나열됨
3. **한 문장 답변**: "왜?" 또는 의문문 뒤에 1문장으로 답변이 끝남
4. **암묵적 전제**: 인과 관계에서 중간 단계가 생략되어 독자가 논리를 따라가기 어려움

### 조치

1. **원리 설명 추가**: 개념당 2~3문장의 원리 설명을 삽입합니다
   ```
   # Before
   - CDN으로 콘텐츠를 사용자 가까이에 배치
   - 에지 컴퓨팅
   - 왕복 횟수 줄이기

   # After
   전파 지연 자체를 줄일 수는 없지만, 그 영향을 줄이는 방법은 있습니다.

   CDN은 원본 서버의 콘텐츠를 전 세계 여러 지점에 복제합니다.
   서울의 사용자가 미국 서버 대신 한국 PoP에서 응답을 받으면,
   RTT가 100ms에서 10ms 미만으로 줄어듭니다.

   프로토콜 수준에서는 왕복 횟수 자체를 줄이는 접근이 있습니다.
   TLS 1.3은 핸드셰이크를 2 RTT에서 1 RTT로 줄였고,
   HTTP/3의 0-RTT는 이전 연결 정보를 재사용하여 첫 요청부터 데이터를 보낼 수 있습니다.
   ```

2. **구체 예시/수치 삽입**: 추상적 서술에 실제 수치나 시나리오를 추가합니다
   ```
   # Before
   클래스 기반 할당이 비효율적이었습니다.

   # After
   클래스 기반 할당이 비효율적이었습니다.
   1000개의 호스트가 필요한 조직을 생각해봅시다.
   클래스 C(254개)는 부족하므로 클래스 B(65,534개)를 할당받아야 합니다.
   결과적으로 64,000개 이상의 주소가 낭비됩니다.
   ```

3. **ASCII 다이어그램 추가**: 흐름이나 구조를 설명하는 곳에 필요 시 다이어그램을 삽입합니다
   ```
   클라이언트 → [SYN] → 서버
   클라이언트 ← [SYN+ACK] ← 서버
   클라이언트 → [ACK] → 서버
   ```

4. **불릿 → 산문 전환**: 3개 이상 불릿이 설명 없이 나열된 곳을 산문(문단)으로 풀어 씁니다

### 경계

- 문장 다듬기(어투, 리듬, 톤)는 하지 않습니다 → `/refine-style`이 처리
- 기존 설명의 깊이 부족(한 문장은 있으나 레퍼런스 수준이 아닌 경우)은 다루지 않습니다 → `/align-reference`가 처리
- 설명이 **아예 없는 곳**에 새로 **생성**하여 삽입하는 것이 이 영역의 역할입니다

### 보강 원칙

설명을 새로 삽입할 때 다음 원칙을 적용합니다:

1. **초보자 기준**: 초보자가 외부 자료 없이 이해할 수 있는 수준으로 작성합니다. "A이므로 C이다" 형태에서 중간 단계 B를 반드시 풀어 씁니다.
2. **구체적 수치/이름 사용**: "빠르게 처리됩니다" 대신 "10ms 이내에 처리됩니다", "인터페이스" 대신 다이어그램의 구체적 이름(veth-a, br0 등)을 사용합니다.
3. **자연스러운 한국어**: 수식어 체인이 과도하지 않도록 하고, 핵심 정보를 문장 앞에 배치합니다.

---

## 영역 2: 도입부 연결 보강

### 19일 레퍼런스 패턴

도입부(프론트매터 뒤 ~ 첫 `---`까지)는 다음 구조를 따릅니다:
**이전 시리즈 링크 → 맥락 설정 → 핵심 문제 선언** (15줄 이상)

```
# 레퍼런스 (SocketTransport-1)
"1970년대 Unix에서 프로세스들은 서로 통신해야 했습니다."          ← 맥락 설정
"파이프, 메시지 큐 같은 IPC 메커니즘이 있었지만..."              ← 이전 글/개념 연결
"네트워크를 통한 통신을 위한 새로운 추상화가 필요했습니다."   ← 핵심 문제 선언
```

### 탐지 기준

다음 중 하나라도 해당하면 도입부 연결 부족으로 판단합니다:

1. **줄 수 부족**: 도입부(프론트매터 뒤 ~ 첫 `---`)가 10줄 미만
2. **이전 글 참조 부재**: 시리즈 글인데 이전 파트 또는 관련 글에 대한 언급이 없음
3. **맥락 없는 시작**: 정의로 바로 시작하여 "왜 이것을 다루는가"가 불명확

### 조치

1. **이전 시리즈/글과의 연결 문장 추가**
   ```
   # Before (NATFirewall-2)
   방화벽은 외부 위협으로부터 네트워크를 보호합니다.

   # After
   [이전 글](/dev/network/NATFirewall-1/)에서 NAT가 사설 네트워크의 호스트들이
   하나의 공인 IP를 공유하는 방법을 살펴봤습니다.
   NAT는 주소 부족 문제를 해결했지만, 외부에서 내부로의 접근을 차단하는
   부수 효과도 가져왔습니다.

   방화벽은 이 "차단"을 의도적이고 체계적으로 수행합니다.
   ```

2. **역사적/문제 상황 맥락 삽입**
   ```
   # Before
   "느리다"는 말은 흔히 듣지만, 정확히 무엇이 느린지는 분명하지 않습니다.

   # After
   1990년대 웹이 등장했을 때, 페이지 하나를 로드하는 데 몇 초가 걸리는 것은 당연했습니다.
   하지만 사용자의 기대는 빠르게 높아졌습니다.

   "느리다"는 말은 흔히 듣지만, 정확히 무엇이 느린지는 분명하지 않습니다.
   ```

### 경계

- 서사적 톤 다듬기(리듬, 문체)는 하지 않습니다 → `/refine-style`이 처리
- 도입부가 15줄 이상인지 최종 점검하는 것은 다루지 않습니다 → `/align-reference`가 처리
- 도입부에 연결/맥락이 **아예 없는 곳**에 새로 **추가**하는 것이 이 영역의 역할입니다

---

## 영역 3: 마무리 형식 정규화

### 19일 레퍼런스 패턴

```markdown
## 마무리
- 불릿 리스트 요약
- ...

(다음 글 연결)

<br>

---

**관련 글**
- [타 시리즈 관련 글](/경로/)

**시리즈**
- 현재 시리즈 Part 1 (현재 글)
- [현재 시리즈 Part 2](/경로/)
```

### 탐지 기준

다음 중 하나라도 해당하면 마무리 형식 정규화가 필요합니다:

1. **제목 불일치**: `## 정리` 또는 기타 변형을 사용 (레퍼런스는 `## 마무리`)
2. **시리즈 섹션 부재**: `**시리즈**` 섹션이 없거나 전체 파트가 나열되지 않음
3. **관련 글에 시리즈 파트 혼재**: `**관련 글**`에 같은 시리즈의 다른 파트가 포함됨
4. **순서 불일치**: `**관련 글**` → `**시리즈**` 순서가 지켜지지 않음

### 조치

1. **제목 변환**: `## 정리` → `## 마무리` (부제가 있으면 유지)
   ```
   # Before
   ## 정리: 분산이 핵심

   # After
   ## 마무리: 분산이 핵심
   ```

2. **시리즈/관련 글 분리**
   ```
   # Before
   **관련 글**
   - [NAT와 방화벽 Part 1](/dev/network/NATFirewall-1/)
   - [NAT와 방화벽 Part 2](/dev/network/NATFirewall-2/)
   - [소켓과 전송](/dev/network/SocketTransport-1/)

   # After
   **관련 글**
   - [소켓과 전송](/dev/network/SocketTransport-1/)

   **시리즈**
   - [NAT와 방화벽 Part 1](/dev/network/NATFirewall-1/) (현재 글)
   - [NAT와 방화벽 Part 2](/dev/network/NATFirewall-2/)
   - [NAT와 방화벽 Part 3](/dev/network/NATFirewall-3/)
   ```

3. **시리즈 전체 파트 나열**: 같은 시리즈의 모든 파트를 나열하고, 현재 글에 "(현재 글)" 표시

### 경계

- 성찰적 문단(불릿 뒤 의미 연결 문단)은 추가하지 않습니다 → `/align-reference`가 처리
- 내러티브 브릿지(다음 글 서사적 연결)는 추가하지 않습니다 → `/align-reference`가 처리
- 마무리 형식의 **구조적 정규화**(제목, 섹션 분리, 순서)만이 이 영역의 역할입니다

---

## `/align-reference`(7단계)와의 역할 분담

| 영역 | equalize-baseline (0단계) | align-reference (7단계) |
|------|--------------------------|------------------------|
| 설명 밀도 | 빠진 내용을 **생성**하여 삽입 | 존재하는 설명이 레퍼런스 **수준**인지 점검 |
| 도입부 | 연결/맥락을 **추가** (원문 보강) | 서사 깊이가 15줄 이상인지 **최종 점검** |
| 마무리 형식 | 시리즈/관련글을 **분리·정규화** | 성찰적 문단·내러티브 브릿지 **추가** |

핵심: 0단계는 **"0→1"** (없는 것을 만듦), 7단계는 **"1→레퍼런스"** (있는 것을 다듬)

---

## 작업 프로세스

### 1단계: 파일 읽기 + 시리즈 식별
- `$ARGUMENTS`가 있으면 해당 파일 읽기
- 없으면 사용자에게 파일 경로를 요청
- 제목 패턴으로 시리즈 판별, 같은 시리즈의 다른 파트 경로 확인

### 2단계: 설명 밀도 스캔
- `##` 섹션별 콘텐츠 줄 수 측정
- 불릿만 나열된 곳 식별 (3개 이상 불릿, 설명 문단 없음)
- "왜?" / 의문문 뒤 한 문장 답변 식별
- 원리-예시-다이어그램 3단 구조 충족 여부 확인

### 3단계: 도입부 연결 스캔
- 프론트매터 뒤 ~ 첫 `---`까지 줄 수 측정
- 이전 시리즈/글 참조 존재 여부 확인
- 맥락 설정(역사적/문제 상황) 존재 여부 확인

### 4단계: 마무리 형식 스캔
- 마감 섹션 제목 확인 (`## 마무리` vs `## 정리` vs 기타)
- `**시리즈**` 섹션 존재 여부, 전체 파트 나열 여부
- `**관련 글**`에 같은 시리즈 파트 혼재 여부
- `**관련 글**` → `**시리즈**` 순서 확인

### 5단계: 수정
우선순위: 마무리 형식(영역 3) → 설명 밀도(영역 1) → 도입부 연결(영역 2)

마무리 형식을 먼저 정규화하는 이유:
- 구조적 변경이므로 다른 수정과 충돌할 가능성이 높음
- 먼저 정규화하면 이후 수정이 안정적인 구조 위에서 동작

### 6단계: 출력
수정된 글 + 영역별 변경 요약

---

## 출력 형식

```
## 기준선 보강 결과

### 영역별 요약
| 영역 | 상태 | 변경 내용 |
|------|------|----------|
| 설명 밀도 | ✓ 수정 | N개 섹션에서 원리/예시/수치 추가 |
| 도입부 연결 | ✓ 수정 | 이전 글 참조 추가, 맥락 N줄 삽입 |
| 마무리 형식 | ✓ 수정 | 제목 변환, 시리즈 섹션 분리 |

### 상세 변경
(각 영역의 Before/After 핵심 발췌)

### 후속 단계 참고
(후속 파이프라인에서 추가로 다듬어야 할 부분이 있으면 기록)
```

---

## 체크리스트

### 설명 밀도
- [ ] 5줄 이하 섹션이 없는가?
- [ ] 불릿만 나열된 곳에 설명이 추가되었는가?
- [ ] "왜?" 질문에 대한 답변이 2문장 이상인가?
- [ ] 추상적 서술에 수치/예시가 포함되었는가?
- [ ] 인과 관계에서 중간 단계(암묵적 전제)가 생략되지 않았는가?
- [ ] 추가된 설명이 초보자 기준으로 충분히 풀어져 있는가?

### 도입부 연결
- [ ] 도입부가 10줄 이상인가?
- [ ] 시리즈 글인 경우 이전 글 참조가 있는가?
- [ ] 역사적/문제 상황 맥락이 존재하는가?

### 마무리 형식
- [ ] `## 마무리` 제목을 사용하는가?
- [ ] `**시리즈**` 섹션이 존재하고 전체 파트가 나열되는가?
- [ ] 현재 글에 "(현재 글)" 표시가 있는가?
- [ ] `**관련 글**`에 같은 시리즈 파트가 혼재되지 않는가?
- [ ] `**관련 글**` → `**시리즈**` 순서인가?
