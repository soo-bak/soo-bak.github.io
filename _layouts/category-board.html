---
layout: default
---

{% comment %}
  ì¹´í…Œê³ ë¦¬ ê²Œì‹œíŒ ë ˆì´ì•„ì›ƒ

  front matterì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ë³€ìˆ˜:
    - title: ì¹´í…Œê³ ë¦¬ ì œëª©
    - description: ì¹´í…Œê³ ë¦¬ ì„¤ëª…
    - category_icon: ì•„ì´ì½˜ (emoji)
    - category_path: í¬ìŠ¤íŠ¸ ê²½ë¡œ í•„í„° (ì˜ˆ: "algorithm/")
{% endcomment %}

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% elsif page.header.video.id and page.header.video.provider %}
  {% include page__hero_video.html %}
{% endif %}

<div id="main" role="main">
  {% include sidebar.html %}

  <div class="archive">
    {% if page.url != "/" and site.breadcrumbs %}
      {% unless paginator %}
        {% include my-breadcrumbs.html %}
      {% endunless %}
    {% endif %}

    {% comment %} ì¹´í…Œê³ ë¦¬ ê²½ë¡œ ì¶”ì¶œ {% endcomment %}
    {% assign current_path = page.url | remove: "/index.html" | remove: "/" %}
    {% assign path_parts = current_path | split: "/" %}

    {% comment %} ì¹´í…Œê³ ë¦¬ ì•„ì´ì½˜ ë§¤í•‘ {% endcomment %}
    {% case path_parts[0] %}
      {% when "algorithm" %}
        {% assign cat_icon = "ğŸ“Š" %}
      {% when "game-design" %}
        {% assign cat_icon = "ğŸ®" %}
      {% when "dev" %}
        {% assign cat_icon = "ğŸ’»" %}
      {% when "library" %}
        {% assign cat_icon = "ğŸ“š" %}
      {% when "daily-life" %}
        {% assign cat_icon = "ğŸŒ¸" %}
      {% when "note" %}
        {% assign cat_icon = "ğŸ“" %}
      {% else %}
        {% assign cat_icon = "ğŸ“" %}
    {% endcase %}

    {% comment %} í˜„ì¬ ì¹´í…Œê³ ë¦¬ì˜ í¬ìŠ¤íŠ¸ í•„í„°ë§ {% endcomment %}
    {% assign filter_path = page.url | remove: "/index.html" | append: "/" | remove_first: "/" %}
    {% assign category_posts = "" | split: "" %}

    {% for post in site.posts %}
      {% if post.path contains filter_path %}
        {% assign category_posts = category_posts | push: post %}
      {% endif %}
    {% endfor %}

    {% assign category_posts = category_posts | sort: "date" | reverse %}
    {% assign post_count = category_posts.size %}

    {% comment %} í•˜ìœ„ ì¹´í…Œê³ ë¦¬ ì°¾ê¸° {% endcomment %}
    {% assign subcategories = "" | split: "" %}
    {% assign current_url_normalized = page.url | remove: "index.html" %}

    {% comment %} navigation.ymlì—ì„œ í˜„ì¬ ì¹´í…Œê³ ë¦¬ì˜ í•˜ìœ„ í•­ëª© ì°¾ê¸° {% endcomment %}
    {% for item in site.data.navigation.main-sidebar %}
      {% assign item_url_normalized = item.url | append: "" %}
      {% if item_url_normalized == current_url_normalized %}
        {% if item.children %}
          {% for child in item.children %}
            {% assign subcategories = subcategories | push: child %}
          {% endfor %}
        {% endif %}
      {% else %}
        {% if item.children %}
          {% for child in item.children %}
            {% assign child_url_normalized = child.url | append: "" %}
            {% if child_url_normalized == current_url_normalized %}
              {% if child.children %}
                {% for grandchild in child.children %}
                  {% assign subcategories = subcategories | push: grandchild %}
                {% endfor %}
              {% endif %}
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endif %}
    {% endfor %}

    {% comment %} í•˜ìœ„ ë¶„ë¥˜ í‘œì‹œ ì—¬ë¶€ ê²°ì • {% endcomment %}
    {% assign show_subcategory = false %}
    {% if subcategories.size > 0 %}
      {% assign show_subcategory = true %}
    {% elsif path_parts.size == 1 %}
      {% assign show_subcategory = true %}
    {% endif %}

    <div class="category-board">
      {% comment %} ì¹´í…Œê³ ë¦¬ í—¤ë” {% endcomment %}
      {% include board/header.html
         title=page.title
         icon=cat_icon
         description=page.description
         count=post_count %}

      {% comment %} í•˜ìœ„ ë¶„ë¥˜ íƒ­ {% endcomment %}
      {% if subcategories.size > 0 %}
      <div class="category-board__tabs">
        <h4 class="category-board__tabs-title"><i class="fas fa-folder-open"></i> í•˜ìœ„ ë¶„ë¥˜</h4>
        <ul class="category-board__tabs-list">
          {% for sub in subcategories %}
            {% assign sub_filter = sub.url | remove_first: "/" %}
            {% assign sub_count = 0 %}
            {% for post in site.posts %}
              {% if post.path contains sub_filter %}
                {% assign sub_count = sub_count | plus: 1 %}
              {% endif %}
            {% endfor %}
          <li class="category-board__tab">
            <a href="{{ sub.url | relative_url }}">
              {{ sub.title }}
              <span class="category-board__tab-count">{{ sub_count }}</span>
            </a>
          </li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      {% comment %} ì»¨í…ì¸  ì˜ì—­ {% endcomment %}
      <div class="category-board__content">
        {% comment %} ì¸ê¸° ê¸€ {% endcomment %}
        {% include board/pinned-posts.html posts=category_posts show_subcategory=show_subcategory %}

        {% comment %} ì „ì²´ ê¸€ ëª©ë¡ {% endcomment %}
        <div class="category-board__all-posts">
          <h4 class="category-board__all-title"><i class="fas fa-list"></i> ì „ì²´ ê¸€</h4>

          {% comment %} í˜ì´ì§€ë„¤ì´ì…˜ ê³„ì‚° {% endcomment %}
          {% assign posts_per_page = 20 %}
          {% assign total_pages = post_count | divided_by: posts_per_page %}
          {% assign remainder = post_count | modulo: posts_per_page %}
          {% if remainder > 0 %}
            {% assign total_pages = total_pages | plus: 1 %}
          {% endif %}

          <ul class="board__post-list">
            {% for post in category_posts limit: posts_per_page %}
              {% include board/post-row.html post=post show_subcategory=show_subcategory %}
            {% endfor %}
          </ul>

          {% if post_count > posts_per_page %}
          <div class="category-board__pagination">
            <p class="category-board__pagination-info">
              ì´ {{ post_count }}ê°œ ê¸€ ì¤‘ 1-{{ posts_per_page }}ê°œ í‘œì‹œ
            </p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
