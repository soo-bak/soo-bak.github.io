---
layout: single
title: "[백준 29332] 보물 지도 (C#, C++) - soo:bak"
date: "2025-12-25 16:05:00 +0900"
description: 단서로 정수 격자점 범위를 좁혀 개수를 구하는 문제
---

## 문제 링크
[29332번 - 보물 지도](https://www.acmicpc.net/problem/29332)

## 설명
각 단서가 가리키는 방향을 만족하는 정수 격자점의 개수를 구하는 문제입니다.  
가능한 위치가 무한히 많다면 Infinity를 출력합니다.

<br>

## 접근법
L은 x < x_i, R은 x > x_i, U는 y > y_i, D는 y < y_i로 해석해 각 축의 상·하한을 갱신합니다.  
정수 좌표이므로 상한은 x_i-1, 하한은 x_i+1 형태가 됩니다.  
두 축 모두 상·하한이 있을 때만 유한하며, 개수는 (상한-하한+1)의 곱입니다.

- - -

## Code

### C#
```csharp
using System;

class Program {
  static void Main() {
    var parts = Console.In.ReadToEnd().Split();
    var idx = 0;
    var n = int.Parse(parts[idx++]);

    long lowerX = 0, upperX = 0, lowerY = 0, upperY = 0;
    bool hasLowerX = false, hasUpperX = false, hasLowerY = false, hasUpperY = false;

    for (var i = 0; i < n; i++) {
      var x = long.Parse(parts[idx++]);
      var y = long.Parse(parts[idx++]);
      var d = parts[idx++][0];

      if (d == 'L') {
        var v = x - 1;
        if (!hasUpperX || v < upperX) upperX = v;
        hasUpperX = true;
      } else if (d == 'R') {
        var v = x + 1;
        if (!hasLowerX || v > lowerX) lowerX = v;
        hasLowerX = true;
      } else if (d == 'U') {
        var v = y + 1;
        if (!hasLowerY || v > lowerY) lowerY = v;
        hasLowerY = true;
      } else {
        var v = y - 1;
        if (!hasUpperY || v < upperY) upperY = v;
        hasUpperY = true;
      }
    }

    if (!hasLowerX || !hasUpperX || !hasLowerY || !hasUpperY) {
      Console.WriteLine("Infinity");
      return;
    }

    long countX = upperX - lowerX + 1;
    long countY = upperY - lowerY + 1;
    Console.WriteLine(countX * countY);
  }
}
```

### C++
```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;

int main() {
  ios::sync_with_stdio(false);
  cin.tie(nullptr);

  int n; cin >> n;
  ll lowerX = 0, upperX = 0, lowerY = 0, upperY = 0;
  bool hasLowerX = false, hasUpperX = false, hasLowerY = false, hasUpperY = false;

  for (int i = 0; i < n; i++) {
    ll x, y; char d;
    cin >> x >> y >> d;

    if (d == 'L') {
      ll v = x - 1;
      if (!hasUpperX || v < upperX) upperX = v;
      hasUpperX = true;
    } else if (d == 'R') {
      ll v = x + 1;
      if (!hasLowerX || v > lowerX) lowerX = v;
      hasLowerX = true;
    } else if (d == 'U') {
      ll v = y + 1;
      if (!hasLowerY || v > lowerY) lowerY = v;
      hasLowerY = true;
    } else {
      ll v = y - 1;
      if (!hasUpperY || v < upperY) upperY = v;
      hasUpperY = true;
    }
  }

  if (!hasLowerX || !hasUpperX || !hasLowerY || !hasUpperY) {
    cout << "Infinity\n";
    return 0;
  }

  ll countX = upperX - lowerX + 1;
  ll countY = upperY - lowerY + 1;
  cout << countX * countY << "\n";

  return 0;
}
```
