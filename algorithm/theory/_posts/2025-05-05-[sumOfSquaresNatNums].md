---
layout: single
title: "자연수 제곱합 공식의 원리와 유도 과정 - soo:bak"
date: "2025-05-05 08:15:00 +0900"
description: "자연수의 제곱합 공식이 어떻게 유도되는지 다양한 관점에서 직관적으로 설명한 글"
---

## 자연수 제곱합 공식이란?

`1`부터 `N`까지의 자연수 제곱의 합은 다음과 같이 정의됩니다:

$$
1^2 + 2^2 + 3^2 + \cdots + N^2 = \sum_{k=1}^{N} k^2
$$

이 제곱합을 효율적으로 계산하기 위한 공식은 다음과 같습니다:

$$
\sum_{k=1}^{N} k^2 = \frac{N(N+1)(2N+1)}{6}
$$

<br>
제곱합을 구하기 위해 반복문으로 각 항을 하나씩 더하는 방식은 시간 복잡도가 $$O(N)$$이지만,

위와 같은 공식을 사용하면 $$O(1)$$ 시간 안에 결과를 구할 수 있습니다.

<br>

---

## 1. 귀납적 검증과 패턴 분석

수학적 공식을 이해하는 가장 기본적인 방법은 몇 가지 예시를 통해 패턴을 확인하는 것입니다.

| N | 제곱합            | 공식 계산 결과 $$\frac{N(N+1)(2N+1)}{6}$$   |
| - | -------------- | ------------------------------------- |
| 1 | 1              | $$\frac{1 \cdot 2 \cdot 3}{6} = 1$$   |
| 2 | 1+4=5          | $$\frac{2 \cdot 3 \cdot 5}{6} = 5$$   |
| 3 | 1+4+9=14       | $$\frac{3 \cdot 4 \cdot 7}{6} = 14$$  |
| 4 | 1+4+9+16=30    | $$\frac{4 \cdot 5 \cdot 9}{6} = 30$$  |
| 5 | 1+4+9+16+25=55 | $$\frac{5 \cdot 6 \cdot 11}{6} = 55$$ |

<br>
어떤 규칙이 있는지 확인하는 과정, 즉, 패턴 관찰은 알고리즘 개발에서 유용한 사고 과정이며,

특히 프로그래밍에서는 이런 귀납적 검증을 테스트 케이스로 활용하기도 합니다.

<br>

---

## 2. 다항식으로부터의 유도

제곱합 $$S(N)$$을 $$N$$에 대한 다항식으로 본다면, 다음과 같은 점화식이 성립합니다:

$$
S(N) = S(N-1) + N^2, \quad S(1) = 1
$$

이러한 수열은 일반적으로 3차 다항식의 형태로 표현될 수 있습니다:

$$
S(N) = aN^3 + bN^2 + cN + d
$$

<br>
몇 가지 값들을 대입해보면:

$$S(1) = 1 \Rightarrow a + b + c + d = 1$$ <br>
$$S(2) = 5 \Rightarrow 8a + 4b + 2c + d = 5$$ <br>
$$S(3) = 14 \Rightarrow 27a + 9b + 3c + d = 14$$ <br>
$$S(4) = 30 \Rightarrow 64a + 16b + 4c + d = 30$$ <br>

<br>
이 연립방정식을 풀면 다음과 같은 계수가 나옵니다:

$$
a = \frac{1}{3}, \quad b = \frac{1}{2}, \quad c = \frac{1}{6}, \quad d = 0
$$

따라서 제곱합 공식은 다음과 같이 표현됩니다:

$$
S(N) = \frac{N^3}{3} + \frac{N^2}{2} + \frac{N}{6} = \frac{N(N+1)(2N+1)}{6}
$$

<br>

---

## 3. 기하학적 해석

제곱이라는 개념은 기하학적으로 정사각형의 넓이로 해석됩니다.

<br>
각 층의 단면을 한 변의 길이가 $$k$$ 인 정사각형(넓이$$k^2$$)으로 생각하고 높이 $$1$$ 인 블록으로 쌓으면,

자연수 제곱합 $$\sum_{k=1}^{N} k^2$$ 은 계단형으로 쌓인 3차원 구조의 총 부피로 이해할 수 있습니다.

<br>
예를 들어, 아래에서 위로 각 층의 단면 넓이가:

$$1^2, 2^2, 3^2, \ldots, N^2$$

인 정사각형 블록을 $$k = 1$$ 부터 $$k = N$$ 까지 차례대로 쌓아 올린다면,

아래로 갈 수록 단면이 넓어지는 계단형 구조가 됩니다.

<br>
이때 수학적으로 이 구조와 가장 유사한 연속적인 형태는 단면 넓이가 $$x^2$$인 연속적인 입체의 부피로,

단면은 $$x-축$$에 수직한 평면에 있으며, $$x = 0$$ 에서 $$x = N$$ 까지의 높이 방향으로 적분하여 다음과 같이 나타낼 수 있습니다:

$$
\text{연속 입체의 부피} = \int_0^N x^2 dx = \frac{N^3}{3}
$$

<br>
반면, 계단형 구조는 단면 넓이가 $$k^2$$ 이고 높이가 $$1$$인 정사각 기둥을 정수 $$k = 1$$부터 $$k = N$$까지 쌓은 3차원 구조의 총 부피로,

다음과 같이 나타낼 수 있습니다:

$$
\text{계단식 블록 합} = \sum_{k=1}^{N} k^2 = \frac{N(N+1)(2N+1)}{6}
$$

<br>
두 구조의 형태를 비교하면,
- 연속 입체의 부피는 $$\frac{N^3}{3}$$이고,
- 계단식 블록의 부피는 큰 $$N$$에서 $$\approx \frac{N^3}{3} + \text{보정항}$$ 으로 근사됩니다.

<br>
이 때, 다음과 같은 관계가 성립합니다:

$$
\frac{N(N+1)(2N+1)}{6} = 2 \cdot \int_0^N \left(x^2 - \frac{1}{2}x + \frac{1}{6}\right) dx
$$

*(여기서 적분은 이산적 합과 연속 부피의 차이를 조정하는 보정 다항식의 넓이를 계산합니다.)*

<br>
이 식은 다음처럼 이해할 수 있습니다:

- 정수 $$k$$마다 높이 $$1$$, 단면 넓이 $$k^2$$인 정사각 기둥이 쌓인 구조는, 연속적인 단면 넓이 $$x^2$$인 입체보다 큰 부피를 가지며, 차이는 큰 $$N$$ 에서 약 $$\frac{N^2}{2}$$ 입니다.
- 보정 다항식 $$x^2 - \frac{1}{2}x + \frac{1}{6}$$ 의 적분은 이 차이를 조정하여 제곱합 공식의 절반을 제공합니다.

<br>
즉,

$$
\int_0^N \left(x^2 - \frac{1}{2}x + \frac{1}{6}\right) dx = \frac{N(N+1)(2N+1)}{12}
$$

<br>
계단식 블록의 부피는 이 보정 다항식의 넓이를 두 배한 값과 같습니다.

$$
2 \cdot \frac{N(N+1)(2N+1)}{12} = \frac{N(N+1)(2N+1)}{6}
$$

<br>
여기서 "두 배"는 다음과 같이 이해할 수 있습니다:

- 연속 입체는 단면 넓이 $$x^2$$ 를 가진 매끄러운 사각뿔 형태이고,
- 계단형 구조는 단면 넓이 $$k^2$$ 인 정사각 기둥으로 구성된 돌출된 형태입니다.
- 계단형 구조는 연속 입체보다 큰 부피를 가지며, 차이는 큰 $$N$$ 에서 약 $$\frac{N^2}{2}$$ 입니다.
- 보정 다항식 $$x^2 - \frac{1}{2}x + \frac{1}{6}$$ 의 적분은 이 차이를 조정하여 제곱합 공식의 절반을 제공하고,<br>
  두 배를 곱하면 전체 부피를 얻게 됩니다.

<br>
즉,

- $$\frac{1}{3}$$: 연속 입체의 부피 $$\frac{N^3}{3}$$ 에서 비롯된 계수.
- $$\frac{1}{2}$$: 보정 다항식의 적분을 2배하여 계단형 부피를 얻는 보정 계수.

<br>
이 관계를 통해 제곱합 공식의 분모 $$\frac{1}{6}$$ 을 직관적으로 이해할 수 있습니다.

<br>

---

## 4. 연속된 세제곱의 차이 활용

다음 항등식은 모든 자연수 $$k$$에 대해 성립합니다:

$$
(k+1)^3 - k^3 = 3k^2 + 3k + 1
$$

<br>
양변을 $$k = 1$$부터 $$N$$까지 모두 더하면 좌변은 아래와 같이 단순화됩니다:

$$
(N+1)^3 - 1^3 = (N+1)^3 - 1
$$

<br>
우변은 항별로 정리해보면:

$$
\sum_{k=1}^{N} (3k^2 + 3k + 1) = 3\sum_{k=1}^{N} k^2 + 3\sum_{k=1}^{N} k + N
$$

<br>
여기서 $$\sum_{k=1}^{N} k = \frac{N(N+1)}{2}$$이므로 정리하면:

$$
(N+1)^3 - 1 = 3\sum_{k=1}^{N} k^2 + \frac{3N(N+1)}{2} + N
$$

<br>
이 식을 $$\sum_{k=1}^{N} k^2$$에 대해 정리하면 역시 동일한 공식이 도출됩니다.

<br>

---

## 5. 수학적 귀납법을 통한 검증

공식의 정확성을 증명하는 데 수학적 귀납법을 사용할 수 있습니다.

- **기초 단계:**

  $$N = 1$$일 때 $$1^2 = 1$$, $$\frac{1 \cdot 2 \cdot 3}{6} = 1$$이므로 성립

- **귀납 가정:**

  $$N = k$$일 때 $$\sum_{i=1}^{k} i^2 = \frac{k(k+1)(2k+1)}{6}$$이 성립한다고 가정

- **귀납 단계:**

  $$\sum_{i=1}^{k+1} i^2 = \sum_{i=1}^{k} i^2 + (k+1)^2$$

<br>

이를 전개하면 다음과 같습니다:

$$
\frac{k(k+1)(2k+1)}{6} + (k+1)^2 = \frac{(k+1)(k+2)(2k+3)}{6}
$$

따라서 $$N = k + 1$$ 에서도 공식이 성립하므로, 모든 자연수에 대해 참임이 증명됩니다.

<br>

---

## 마무리

이렇게, 자연수 제곱합 공식은 단순히 암기할 대상이라기 보다,

- 수열의 패턴 관찰
- 기하학적 구조를 통한 해석
- 다항식 유도 및 검증
- 세제곱 항등식 활용
- 수학적 귀납법을 통한 증명

등의 다양한 수학적 개념과 연결되어 있는 재미있는 공식입니다.

<br>

> 참고 : [1부터 n까지 자연수의 합과 삼각수 - soo:bak](https://soo-bak.github.io/algorithm/theory/TriNum/)
