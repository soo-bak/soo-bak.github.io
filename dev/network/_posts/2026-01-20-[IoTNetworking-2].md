---
layout: single
title: "IoT 네트워킹 (2) - LPWAN과 IoT 보안 - soo:bak"
date: "2026-01-20 22:31:22 +0900"
description: LPWAN, LoRaWAN, NB-IoT, IoT 보안 위협, 디바이스 인증, 엣지 컴퓨팅을 설명합니다.
tags:
  - 네트워크
  - IoT
  - LoRaWAN
  - LPWAN
  - 보안
  - 엣지컴퓨팅
---

## 장거리 저전력 통신과 보안

[Part 1](/dev/network/IoTNetworking-1/)에서 IoT 프로토콜을 살펴보았습니다.

<br>

수 킬로미터 떨어진 센서와 어떻게 통신할까요?

그리고 수십억 개의 디바이스를 어떻게 보호할까요?

---

## LPWAN 개요

### LPWAN이란

**LPWAN(Low Power Wide Area Network)**은 저전력 장거리 통신입니다.

<br>

```
커버리지 vs 데이터레이트:

                데이터레이트
                    ▲
                    │
              WiFi  │   ●
                    │
              LTE   │       ●
                    │
                    │
            LPWAN   │                   ●
                    │
                    └────────────────────► 커버리지
                        100m  1km  10km

LPWAN: 낮은 데이터레이트, 넓은 커버리지
```

<br>

### LPWAN의 특성

- **장거리**: 수~수십 킬로미터
- **저전력**: 배터리로 수년 동작
- **저데이터**: 초당 수십~수백 비트
- **저비용**: 간단한 하드웨어

<br>

### 라이센스 vs 비라이센스

```
비라이센스 대역:                라이센스 대역:
┌────────────────────┐         ┌────────────────────┐
│ LoRaWAN            │         │ NB-IoT             │
│ Sigfox             │         │ LTE-M              │
│                    │         │                    │
│ ISM 대역 사용      │         │ 통신사 주파수 사용 │
│ (868MHz, 915MHz)   │         │                    │
│                    │         │                    │
│ 비용: 낮음         │         │ 비용: 높음         │
│ QoS: 보장 안 됨    │         │ QoS: 보장됨        │
└────────────────────┘         └────────────────────┘
```

---

## LoRaWAN

### LoRa와 LoRaWAN

**LoRa**는 물리 계층 기술입니다.

**LoRaWAN**은 LoRa 위의 네트워크 프로토콜입니다.

<br>

```
┌─────────────────────────────────────┐
│          LoRaWAN (MAC)              │
├─────────────────────────────────────┤
│          LoRa (PHY)                 │
├─────────────────────────────────────┤
│      ISM 대역 (868/915 MHz)         │
└─────────────────────────────────────┘
```

<br>

### Chirp Spread Spectrum

LoRa는 **CSS(Chirp Spread Spectrum)**를 사용합니다.

<br>

```
Chirp 신호:

주파수
  ▲
  │     ╱│     ╱│
  │    ╱ │    ╱ │
  │   ╱  │   ╱  │
  │  ╱   │  ╱   │
  │ ╱    │ ╱    │
  └──────┴──────┴────► 시간

Up-chirp: 주파수가 증가
Down-chirp: 주파수가 감소
```

<br>

장점:
- 간섭에 강함
- 노이즈 속에서도 디코딩 가능
- 도플러 효과에 강함

<br>

### Spreading Factor (SF)

SF는 데이터레이트와 범위의 트레이드오프입니다.

<br>

```
SF    범위         데이터레이트    배터리 소모
───────────────────────────────────────────────
SF7   짧음          높음           낮음
SF8   ↓             ↓              ↓
SF9   ↓             ↓              ↓
SF10  ↓             ↓              ↓
SF11  ↓             ↓              ↓
SF12  길다          낮음           높음

SF가 높을수록:
- 더 먼 거리
- 더 느린 전송
- 더 많은 에너지 소모
```

<br>

### LoRaWAN 네트워크 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                         LoRaWAN 네트워크                         │
│                                                                 │
│  ┌─────────┐     ┌─────────┐     ┌─────────┐     ┌─────────┐  │
│  │End Node │     │End Node │     │End Node │     │End Node │  │
│  └────┬────┘     └────┬────┘     └────┬────┘     └────┬────┘  │
│       │               │               │               │        │
│       │    LoRa       │    LoRa       │    LoRa       │        │
│       │               │               │               │        │
│       ▼               ▼               ▼               ▼        │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │                       Gateway                            │  │
│  │                  (여러 채널 수신)                         │  │
│  └──────────────────────────┬──────────────────────────────┘  │
│                              │                                 │
│                              │ IP (TCP/UDP)                    │
│                              ▼                                 │
│                    ┌─────────────────┐                        │
│                    │  Network Server │                        │
│                    │  (MAC 처리)     │                        │
│                    └────────┬────────┘                        │
│                              │                                 │
│                              ▼                                 │
│                    ┌─────────────────┐                        │
│                    │ Application     │                        │
│                    │ Server          │                        │
│                    └─────────────────┘                        │
└─────────────────────────────────────────────────────────────────┘
```

<br>

### 디바이스 클래스

LoRaWAN은 세 가지 디바이스 클래스를 정의합니다.

<br>

#### Class A: 가장 저전력

```
End Device ─── Uplink ───► Gateway
           ◄── Rx1 ─────── (1초 후)
           ◄── Rx2 ─────── (2초 후)

           (슬립...)

다운링크는 업링크 후에만 가능
```

<br>

센서처럼 대부분 데이터를 보내기만 하는 디바이스.

<br>

#### Class B: 예정된 수신

```
비콘 ─────────────────────────────────────►
      │           │           │
      ▼           ▼           ▼
    Ping        Ping        Ping
    Slot        Slot        Slot

정해진 시간에 수신 윈도우 열림
```

<br>

주기적으로 명령을 받아야 하는 디바이스.

<br>

#### Class C: 상시 수신

```
항상 수신 대기 (전송 중 제외)

End Device ──────────────────────────►
           ◄──────────── 언제든 수신 가능
```

<br>

전력 제약이 없는 디바이스 (예: 전원 연결된 게이트웨이).

---

## NB-IoT / LTE-M

### 셀룰러 기반 LPWAN

**NB-IoT**와 **LTE-M**은 기존 셀룰러 인프라를 사용합니다.

<br>

```
┌─────────────────────────────────────────────────────────────┐
│                      셀룰러 LPWAN                            │
│                                                             │
│  ┌─────────────┐           ┌─────────────┐                 │
│  │  NB-IoT     │           │  LTE-M      │                 │
│  │             │           │             │                 │
│  │ 200kHz 대역 │           │ 1.4MHz 대역 │                 │
│  │ ~250kbps    │           │ ~1Mbps      │                 │
│  │ 고정/저속   │           │ 이동/중속   │                 │
│  └─────────────┘           └─────────────┘                 │
│                                                             │
│         기존 기지국에 소프트웨어 업그레이드로 지원           │
└─────────────────────────────────────────────────────────────┘
```

<br>

### LoRaWAN vs NB-IoT

| 항목 | LoRaWAN | NB-IoT |
|-----|---------|--------|
| 주파수 | 비라이센스 | 라이센스 |
| 인프라 | 자체 구축 | 통신사 |
| 커버리지 | 15km (농촌) | 전국 |
| 데이터레이트 | 50kbps | 250kbps |
| 지연 | 수초 | 1-10초 |
| 비용 | 초기 높음, 운영 낮음 | 초기 낮음, 운영 높음 |

<br>

### 사용 사례

```
LoRaWAN 적합:
- 자체 네트워크 구축 가능
- 농업, 스마트 빌딩
- 비용 최소화 필요

NB-IoT 적합:
- 전국적 커버리지 필요
- 이동하는 자산 추적
- 신뢰성 중요
- 빠른 배포 필요
```

---

## IoT 보안 위협

### 디바이스 취약점

IoT 디바이스는 제한된 연산 능력, 업데이트 부재, 관리 소홀 등으로 인해 보안에 취약한 경우가 많습니다.

<br>

```
취약점:
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  1. 기본 비밀번호: admin/admin                              │
│  2. 펌웨어 업데이트 없음                                    │
│  3. 암호화 없는 통신                                        │
│  4. 디버그 포트 열림                                        │
│  5. 물리적 접근 가능                                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

<br>

### Mirai 봇넷 (2016)

**Mirai**는 IoT 디바이스를 감염시킨 봇넷입니다.

<br>

```
Mirai 공격 흐름:

1. 인터넷 스캔 (Telnet 포트)
2. 기본 비밀번호로 로그인 시도
3. 악성코드 설치
4. 봇넷에 합류

┌─────────┐   ┌─────────┐   ┌─────────┐
│ 카메라  │   │ 라우터  │   │   DVR   │
│ (감염)  │   │ (감염)  │   │ (감염)  │
└────┬────┘   └────┬────┘   └────┬────┘
     │             │             │
     └─────────────┼─────────────┘
                   │
                   ▼
            ┌─────────────┐
            │  C&C 서버   │
            └──────┬──────┘
                   │ 공격 명령
                   ▼
            ┌─────────────┐
            │   타겟      │
            │  (DDoS)     │
            └─────────────┘

결과: Dyn DNS 공격 → Twitter, Netflix 등 다운
```

<br>

이 공격에는 수십만 개의 감염된 IoT 디바이스가 동원되었으며, 이는 IoT 보안의 심각성을 전 세계에 알린 사건이 되었습니다.

<br>

### 통신 가로채기

```
중간자 공격 (MITM):

센서 ─────────────► 공격자 ─────────────► 서버
            │
            └── 데이터 가로채기/변조

암호화 없으면:
- 센서 데이터 노출
- 명령 위조 가능
```

---

## IoT 보안 대책

### 디바이스 인증

각 디바이스를 **고유하게 식별**하고 인가되지 않은 디바이스의 접근을 차단해야 합니다.

<br>

```
인증 방식:

1. 사전 공유 키 (PSK):
   디바이스에 키 저장 → 제조 시 주입

2. 인증서 기반:
   X.509 인증서 → PKI 인프라 필요

3. 하드웨어 보안:
   TPM, Secure Element → 키 추출 방지

┌─────────────────────────────────────────────┐
│              디바이스                        │
│  ┌─────────────────────────────────────┐   │
│  │         Secure Element              │   │
│  │  ┌───────────────────────────────┐ │   │
│  │  │        개인 키 (추출 불가)     │ │   │
│  │  └───────────────────────────────┘ │   │
│  └─────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
```

<br>

### 통신 암호화

전송 중인 데이터를 암호화하여 도청과 변조로부터 보호해야 합니다.

<br>

```
프로토콜별 보안:

MQTT:
센서 ─── TLS ───► 브로커

CoAP:
센서 ─── DTLS ───► 서버

LoRaWAN:
End Device ─── AES-128 ───► Network Server
               (두 개 키: NwkSKey, AppSKey)

NwkSKey: MAC 명령 암호화
AppSKey: 애플리케이션 데이터 암호화
```

<br>

### 펌웨어 업데이트

보안 취약점 발견 시 신속하게 패치를 배포하고 적용할 수 있는 체계가 필요합니다.

<br>

```
안전한 펌웨어 업데이트:

┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  1. 서명된 펌웨어                                           │
│     제조사 개인 키로 서명 → 디바이스가 검증                 │
│                                                             │
│  2. 안전한 부트 (Secure Boot)                               │
│     부팅 시 펌웨어 무결성 검증                              │
│                                                             │
│  3. 롤백 방지                                               │
│     이전 취약 버전으로 되돌리기 방지                        │
│                                                             │
│  4. 암호화된 전송                                           │
│     업데이트 파일 가로채기 방지                             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

<br>

### 네트워크 분리

IoT 디바이스를 별도의 네트워크로 격리하여 침해 시 피해 범위를 최소화해야 합니다.

<br>

```
네트워크 세그멘테이션:

┌─────────────────────────────────────────────────────────────┐
│                        방화벽                                │
├─────────────────┬───────────────────┬───────────────────────┤
│   기업 네트워크 │    IoT 네트워크   │   게스트 네트워크    │
│                 │                   │                       │
│   PC, 서버      │   센서, 카메라    │   방문자              │
│                 │                   │                       │
│   민감 데이터   │   제한된 접근     │   인터넷만            │
└─────────────────┴───────────────────┴───────────────────────┘

IoT 디바이스가 침해되어도 기업 네트워크 접근 불가
```

---

## 엣지 컴퓨팅

### 클라우드의 한계

수많은 IoT 디바이스에서 생성되는 모든 데이터를 클라우드로 전송하는 것은 지연, 비용, 대역폭 측면에서 비효율적입니다.

<br>

```
문제점:
1. 지연: 클라우드 왕복 시간
2. 대역폭: 대량 데이터 전송 비용
3. 프라이버시: 민감 데이터 외부 전송
4. 연결 의존: 오프라인 시 동작 불가
```

<br>

### 엣지에서 처리

**엣지 컴퓨팅**은 데이터 소스 근처에서 처리합니다.

<br>

```
전통적 (클라우드 중심):

센서들 ─────────────────────────────────► 클라우드
         모든 데이터                        모든 처리


엣지 컴퓨팅:

┌─────────────────────────────────────────────────────────────┐
│                          엣지                                │
│                                                             │
│  센서들 ───► 엣지 게이트웨이 ───► 클라우드                  │
│              │                                              │
│              ├── 실시간 처리                                │
│              ├── 필터링                                     │
│              ├── 집계                                       │
│              └── 로컬 의사결정                              │
│                                                             │
│         원시 데이터 → 인사이트만 전송                       │
└─────────────────────────────────────────────────────────────┘
```

<br>

### 엣지 컴퓨팅의 장점

```
1. 낮은 지연:
   로컬 처리 → 밀리초 응답

2. 대역폭 절약:
   1000개 센서 × 초당 100 데이터 → 집계된 1개 요약

3. 프라이버시:
   얼굴 인식 → 엣지에서 처리, ID만 전송

4. 오프라인 동작:
   연결 없어도 기본 기능 유지
```

<br>

### Fog Computing

**Fog Computing**은 엣지를 확장한 개념입니다.

<br>

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                     클라우드                         │   │
│  │                  장기 저장, 분석                     │   │
│  └───────────────────────┬─────────────────────────────┘   │
│                          │                                 │
│  ┌───────────────────────▼─────────────────────────────┐   │
│  │                      Fog                             │   │
│  │               지역 데이터 센터                       │   │
│  │            중간 수준 처리, 캐싱                      │   │
│  └───────────────────────┬─────────────────────────────┘   │
│                          │                                 │
│  ┌───────────────────────▼─────────────────────────────┐   │
│  │                     엣지                             │   │
│  │                게이트웨이, 라우터                    │   │
│  │              실시간 처리, 필터링                     │   │
│  └───────────────────────┬─────────────────────────────┘   │
│                          │                                 │
│  ┌───────────────────────▼─────────────────────────────┐   │
│  │                    디바이스                          │   │
│  │                 센서, 액추에이터                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘

계층적 처리: 긴급한 것은 가까이서, 복잡한 것은 멀리서
```

---

## 정리: IoT는 새로운 인터넷

IoT 네트워킹의 핵심:

<br>

**LPWAN**:
- LoRaWAN: 자체 네트워크, 저비용
- NB-IoT: 셀룰러 인프라, 전국 커버리지

<br>

**보안**:
- 디바이스 인증 필수
- 통신 암호화
- 펌웨어 업데이트 체계
- 네트워크 분리

<br>

**엣지 컴퓨팅**:
- 데이터 소스 근처에서 처리
- 지연, 대역폭, 프라이버시 개선

<br>

```
"IoT 보안은 선택이 아닌 필수다."

취약한 IoT 디바이스는 전체 인터넷의 위협이 됩니다.
```

<br>

수십억 개의 디바이스가 연결되는 시대, IoT는 인터넷의 가장 큰 확장이자 새로운 도전 과제를 제시하고 있습니다.

---

**관련 글**
- [무선 통신의 원리 (1) - 전파와 변조](/dev/network/WirelessCommunication-1/)
- [네트워크 보안의 원리 (1) - 암호화의 기초](/dev/network/NetworkSecurity-1/)
- [IoT 네트워킹 (1) - IoT 프로토콜](/dev/network/IoTNetworking-1/)
